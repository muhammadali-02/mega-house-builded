"use strict";(globalThis["webpackChunktemplate"]=globalThis["webpackChunktemplate"]||[]).push([[969],{7335:(e,t,l)=>{l.d(t,{Z:()=>u});var o=l(7524),s=l(8339),a=l(9053),i=l(5198),n=function(e,t,l,o){function s(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,a){function i(e){try{r(o.next(e))}catch(t){a(t)}}function n(e){try{r(o["throw"](e))}catch(t){a(t)}}function r(e){e.done?l(e.value):s(e.value).then(i,n)}r((o=o.apply(e,t||[])).next())}))};(0,s.tv)();const r={_401interceptor:null,i:0,init(e){o.Z.defaults.baseURL=e},getFile(e){return o.Z.get(e,{responseType:"blob"})},setHeader(){o.Z.defaults.headers.common.Authorization=`Bearer ${a.Z.getToken()}`,o.Z.defaults.headers.common["Accept-Language"]="en"},formData(e,t){return o.Z.post(e,t,{headers:{"Content-Type":"multipart/form-data"}})},removeHeader(){o.Z.defaults.headers.common={}},get(e,t={}){return o.Z.get(`${e}`,t)},post(e,t){return o.Z.post(`${e}`,t)},customPost(e,t){return o.Z.post(e,t,{headers:{"Content-Type":"application/xml"}})},put(e,t){return o.Z.put(e,t)},delete(e){return o.Z["delete"](e)},customRequest(e){return(0,o.Z)(e)},mount401Interceptor(){this._401interceptor=o.Z.interceptors.response.use((e=>e),(e=>n(this,void 0,void 0,(function*(){if(this.i++,1==this.i){if(403===e.response.status||401===e.response.status)throw i.Z.logout(),window.location.reload(),e;if(200!=e.response.statusCode&&417!=e.response.statusCode)throw e}throw this.i=0,e}))))},unmount401Interceptor(){o.Z.interceptors.response.eject(this._401interceptor)}},u=r},5198:(e,t,l)=>{l.d(t,{Z:()=>i});var o=l(7335),s=l(9053);const a={login(e){return o.Z.post("/auth-payload",e)},logout(){return o.Z.removeHeader(),s.Z.removeToken(),s.Z.removeUsername(),s.Z.removeRoles(),s.Z.removePermissions(),!0}},i=a},242:(e,t,l)=>{l.d(t,{Z:()=>a});var o=l(7335);const s={list(){return o.Z.get("/user/list")},getById(e){return o.Z.get(`/home/get-by-id/${e}`)},deleteHome(e){return o.Z["delete"](`/home/delete/${e}`)},save(e,t){return t?o.Z.post("/home/create",e):o.Z.put("/home/update",e)}},a=s},9630:(e,t,l)=>{l.d(t,{Z:()=>s});const o={list(){},getById(){},deleteHome(){},save(e){}},s=o},8969:(e,t,l)=>{l.r(t),l.d(t,{default:()=>N});var o=l(9835),s=l(6970);const a=(0,o._)("hr",{class:"q-ma-none"},null,-1),i=(0,o._)("br",null,null,-1),n=(0,o._)("img",{src:"https://img.freepik.com/premium-vector/no-data-empty-data-concept-illustration-vector_610956-1400.jpg",alt:"not_found",style:{"border-radius":"50px",width:"400px"}},null,-1),r={key:1,class:"q-pa-md text-center"},u=(0,o._)("img",{src:"https://img.freepik.com/premium-vector/no-data-empty-data-concept-illustration-vector_610956-1400.jpg",alt:"not_found",style:{"border-radius":"50px",width:"400px"}},null,-1),d=[u],m=(0,o._)("hr",{class:"q-ma-none"},null,-1),c={class:"row"},p={class:"col"},h={class:"col"},f={class:"row"},w={class:"col"},g={class:"col"},_=(0,o._)("hr",null,null,-1),b={class:"row"},Z={class:"col text-left"},v={class:"col text-right"};function k(e,t,l,u,k,y){const W=(0,o.up)("q-toolbar-title"),q=(0,o.up)("q-btn"),$=(0,o.up)("q-toolbar"),x=(0,o.up)("q-icon"),U=(0,o.up)("q-item-section"),z=(0,o.up)("q-item-label"),I=(0,o.up)("q-item"),V=(0,o.up)("q-list"),Q=(0,o.up)("q-th"),C=(0,o.up)("q-tr"),T=(0,o.up)("q-td"),j=(0,o.up)("q-banner"),L=(0,o.up)("q-popup-proxy"),H=(0,o.up)("q-markup-table"),B=(0,o.up)("q-splitter"),F=(0,o.up)("q-input"),P=(0,o.up)("q-form"),D=(0,o.up)("q-card"),A=(0,o.up)("q-dialog"),S=(0,o.up)("vue-easy-lightbox"),R=(0,o.up)("q-inner-loading"),E=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(D,{bordered:"",class:"border-radius-10"},{default:(0,o.w5)((()=>[(0,o.Wm)($,null,{default:(0,o.w5)((()=>[(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("sidebar.person")),1)])),_:1}),k.homeId?((0,o.wg)(),(0,o.j4)(q,{key:0,onClick:y.createForm,flat:"",class:"bg-green-opacity",color:"positive",icon:"add",label:e.$t("actions.create")},null,8,["onClick","label"])):(0,o.kq)("",!0)])),_:1}),a,(0,o.Wm)(B,{modelValue:k.splitter,"onUpdate:modelValue":t[0]||(t[0]=e=>k.splitter=e),horizontal:e.$q.screen.xs},{before:(0,o.w5)((()=>[k.homes&&k.homes.length>0?((0,o.wg)(),(0,o.j4)(V,{key:0,separator:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(k.homes,((e,t)=>((0,o.wg)(),(0,o.j4)(I,{key:`home-${t}`,onClick:t=>k.homeId=e.name,active:k.homeId&&k.homeId===e.name,"active-class":"bg-gradient-opacity text-white",clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{name:"home"})])),_:1}),(0,o.Wm)(U,null,{default:(0,o.w5)((()=>[(0,o.Wm)(z,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick","active"])))),128))])),_:1})):((0,o.wg)(),(0,o.j4)(I,{key:1},{default:(0,o.w5)((()=>[(0,o.Wm)(U,null,{default:(0,o.w5)((()=>[(0,o.Wm)(z,{class:"text-center"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("fields.not_found")),1)])),_:1})])),_:1})])),_:1}))])),after:(0,o.w5)((()=>[k.homeId?((0,o.wg)(),(0,o.j4)(H,{key:0},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o.Wm)(C,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("â„–")])),_:1}),(0,o.Wm)(Q,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("fields.f_i_o")),1)])),_:1}),(0,o.Wm)(Q,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("fields.passport")),1)])),_:1}),(0,o.Wm)(Q,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("fields.phone")),1)])),_:1}),(0,o.Wm)(Q,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("fields.work")),1)])),_:1}),(0,o.Wm)(Q,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("actions.title")),1)])),_:1})])),_:1})]),(0,o._)("tbody",null,[k.list&&k.list.length>0?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:0},(0,o.Ko)(k.list,((t,l)=>((0,o.wg)(),(0,o.j4)(C,{key:`item-${l}`},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{class:"text-center"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(l+1),1)])),_:2},1024),(0,o.Wm)(T,{class:"text-center"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.f_i_o),1)])),_:2},1024),(0,o.Wm)(T,{class:"text-center"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.passport),1),i,(0,o.Uk)((0,s.zw)(t.pin_fl),1)])),_:2},1024),(0,o.Wm)(T,{class:"text-center"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.phone),1)])),_:2},1024),(0,o.Wm)(T,{class:"text-center"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.work),1)])),_:2},1024),(0,o.Wm)(T,{class:"text-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{flat:"",dense:"",round:"",icon:"description",class:"text-deep-purple"}),(0,o.Wm)(q,{onClick:e=>y.editForm(t,l),flat:"",dense:"",round:"",icon:"edit",class:"text-primary"},null,8,["onClick"]),(0,o.Wm)(q,{flat:"",dense:"",round:"",icon:"delete",class:"text-negative"},{default:(0,o.w5)((()=>[(0,o.Wm)(L,null,{default:(0,o.w5)((()=>[(0,o.Wm)(j,null,{avatar:(0,o.w5)((()=>[(0,o.Wm)(x,{name:"info",color:"red"})])),action:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(q,{label:e.$t("actions.no"),color:"negative",push:"",glossy:"",size:"sm"},null,8,["label"]),[[E]]),(0,o.wy)((0,o.Wm)(q,{onClick:e=>y.deleteForm(l),label:e.$t("actions.yes"),color:"positive",push:"",glossy:"",size:"sm"},null,8,["onClick","label"]),[[E]])])),default:(0,o.w5)((()=>[(0,o.Uk)(" "+(0,s.zw)(e.$t("delete_text"))+" ",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)):((0,o.wg)(),(0,o.j4)(C,{key:1},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{colspan:"6",class:"text-center"},{default:(0,o.w5)((()=>[n])),_:1})])),_:1}))])])),_:1})):((0,o.wg)(),(0,o.iD)("div",r,d))])),_:1},8,["modelValue","horizontal"]),(0,o.Wm)(A,{modelValue:k.modal,"onUpdate:modelValue":t[6]||(t[6]=e=>k.modal=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{style:{width:"100%"}},{default:(0,o.w5)((()=>[(0,o.Wm)($,null,{default:(0,o.w5)((()=>[(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(k.create?e.$t("actions.create"):e.$t("actions.edit")),1)])),_:1}),(0,o.wy)((0,o.Wm)(q,{flat:"",round:"",dense:"",icon:"close"},null,512),[[E]])])),_:1}),m,(0,o.Wm)(P,{onSubmit:y.save,class:"q-pa-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{modelValue:k.form.f_i_o,"onUpdate:modelValue":t[1]||(t[1]=e=>k.form.f_i_o=e),dense:"",outlined:"","lazy-rules":"",rules:[y.required],label:e.$t("fields.f_i_o")},null,8,["modelValue","rules","label"]),(0,o._)("div",c,[(0,o._)("div",p,[(0,o.Wm)(F,{modelValue:k.form.passport,"onUpdate:modelValue":t[2]||(t[2]=e=>k.form.passport=e),dense:"",outlined:"","lazy-rules":"",rules:[y.required],label:e.$t("fields.passport"),mask:"AA #######"},null,8,["modelValue","rules","label"])]),(0,o._)("div",h,[(0,o.Wm)(F,{modelValue:k.form.pin_fl,"onUpdate:modelValue":t[3]||(t[3]=e=>k.form.pin_fl=e),dense:"",outlined:"","lazy-rules":"",rules:[y.required],label:e.$t("fields.pin_fl"),mask:"##############"},null,8,["modelValue","rules","label"])])]),(0,o._)("div",f,[(0,o._)("div",w,[(0,o.Wm)(F,{modelValue:k.form.phone,"onUpdate:modelValue":t[4]||(t[4]=e=>k.form.phone=e),dense:"",outlined:"","lazy-rules":"",rules:[y.required],label:e.$t("fields.phone"),mask:"(##) ###-##-##"},null,8,["modelValue","rules","label"])]),(0,o._)("div",g,[(0,o.Wm)(F,{modelValue:k.form.work,"onUpdate:modelValue":t[5]||(t[5]=e=>k.form.work=e),dense:"",outlined:"","lazy-rules":"",rules:[y.required],label:e.$t("fields.work")},null,8,["modelValue","rules","label"])])]),_,(0,o._)("div",b,[(0,o._)("div",Z,[(0,o.wy)((0,o.Wm)(q,{flat:"",label:e.$t("actions.cancel"),color:"negative",class:"bg-red-opacity","no-caps":""},null,8,["label"]),[[E]])]),(0,o._)("div",v,[(0,o.Wm)(q,{flat:"",label:e.$t("actions.save"),type:"submit",color:"positive",class:"bg-green-opacity","no-caps":""},null,8,["label"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(S,{visible:k.singleImage,imgs:`${y.rootUrl}/${k.uploadPath}`,onHide:t[7]||(t[7]=e=>k.singleImage=!1)},null,8,["visible","imgs"]),(0,o.Wm)(R,{color:"deep-purple",showing:k.loading},null,8,["showing"])])),_:1})}l(9665),l(6890);var y=l(3784),W=l(9630),q=l(242);const $={name:"persons",components:{VueEasyLightbox:y.Z},data(){return{splitter:25,loading:!1,list:[],create:!0,index:0,modal:!1,form:{},photoModal:!1,singleImage:!1,uploadPath:"",photos:[],homeId:null,homes:[]}},watch:{homeId:{handler(e){e&&this.getList()}}},computed:{rootUrl(){return"https://mega-house-back.onrender.com/images/"}},methods:{required(e){return e&&e.length>0||this.$t("fields.required")},requiredBool(e){return e||this.$t("fields.required")},getList(){this.loading=!0;const e=W.Z.list();let t=[];e&&e.length>0&&e.forEach((e=>{this.homeId===e.homeId&&t.push(e)})),this.list=t,this.loading=!1},getHomes(){this.loading=!0,this.homes=q.Z.list(),this.loading=!1},createForm(){this.create=!0,this.form={},this.modal=!0},editForm(e,t){this.create=!1,this.index=t,this.form=Object.assign({},e),this.modal=!0},deleteForm(e){this.loading=!0,this.list.splice(e,1),W.Z.save(this.list),this.getList(),this.loading=!1,this.$q.notify({message:this.$t("success_deleted"),progress:!0,closeBtn:!0,type:"positive",position:"top-right"})},save(){this.loading=!0,this.form.homeId=this.homeId,this.create?(this.list.unshift(this.form),W.Z.save(this.list),this.getList(),this.modal=!1,this.loading=!1):(this.list[this.index]=Object.assign({},this.form),W.Z.save(this.list),this.getList(),this.modal=!1,this.loading=!1),this.$q.notify({message:this.$t(""+(this.create?"success_created":"success_updated")),progress:!0,closeBtn:!0,type:"positive",position:"top-right"})}},created(){this.getHomes()}};var x=l(1639),U=l(4458),z=l(1663),I=l(1973),V=l(8879),Q=l(7498),C=l(3246),T=l(490),j=l(1233),L=l(2857),H=l(3115),B=l(6933),F=l(3532),P=l(1682),D=l(7220),A=l(2765),S=l(7128),R=l(2074),E=l(8326),K=l(6611),M=l(854),O=l(2146),Y=l(9984),G=l.n(Y);const J=(0,x.Z)($,[["render",k]]),N=J;G()($,"components",{QCard:U.Z,QToolbar:z.Z,QToolbarTitle:I.Z,QBtn:V.Z,QSplitter:Q.Z,QList:C.Z,QItem:T.Z,QItemSection:j.Z,QIcon:L.Z,QItemLabel:H.Z,QMarkupTable:B.Z,QTr:F.Z,QTh:P.Z,QTd:D.Z,QPopupProxy:A.Z,QBanner:S.Z,QDialog:R.Z,QForm:E.Z,QInput:K.Z,QInnerLoading:M.Z}),G()($,"directives",{ClosePopup:O.Z})}}]);